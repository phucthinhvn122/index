<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FluxTea - Premium Currency Exchange</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            color-scheme: dark;
        }

        :root {
            --primary: #00d9ff;
            --primary-dark: #0099cc;
            --secondary: #00ffa3;
            --accent: #ff006e;
            --dark: #0a0e27;
            --darker: #050812;
            --surface: #1a1f3a;
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text: #e8f0ff;
            --text-muted: #8b95b4;
            --success: #00d9a3;
            --danger: #ff3366;
            --warning: #ffa500;
            --blur-strength: 20px;
            --transition-speed: 0.4s;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, var(--darker) 0%, #0f1535 25%, #1a0f35 50%, var(--darker) 100%);
            background-attachment: fixed;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(0, 217, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 110, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        /* ===================== MOTION BLUR SMOOTH ===================== */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); filter: blur(8px); }
            to   { opacity: 1; transform: translateY(0);     filter: blur(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px);  filter: blur(8px); }
            to   { opacity: 1; transform: translateY(0);     filter: blur(0); }
        }
        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-30px); filter: blur(6px); }
            to   { opacity: 1; transform: translateX(0);     filter: blur(0); }
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(40px);  filter: blur(8px); }
            to   { opacity: 1; transform: translateX(0);     filter: blur(0); }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.85);       filter: blur(6px); }
            to   { opacity: 1; transform: scale(1);          filter: blur(0); }
        }
        @keyframes swapSpin {
            0%   { transform: rotate(0deg)   scale(1);    filter: blur(0); }
            40%  { transform: rotate(120deg) scale(1.2);  filter: blur(3px); }
            80%  { transform: rotate(200deg) scale(0.95); filter: blur(1px); }
            100% { transform: rotate(180deg) scale(1);    filter: blur(0); }
        }
        @keyframes notifSlide {
            0%   { opacity: 0; transform: translateX(120%) scale(0.9); filter: blur(6px); }
            15%  { opacity: 1; transform: translateX(0)    scale(1);   filter: blur(0); }
            80%  { opacity: 1; transform: translateX(0)    scale(1);   filter: blur(0); }
            100% { opacity: 0; transform: translateX(120%) scale(0.9); filter: blur(4px); }
        }
        @keyframes pageEnter {
            from { opacity: 0; transform: translateY(16px); filter: blur(10px); }
            to   { opacity: 1; transform: translateY(0);    filter: blur(0); }
        }
        @keyframes settingsOpen {
            from { opacity: 0; transform: translateX(100%) scale(0.95); filter: blur(12px); }
            to   { opacity: 1; transform: translateX(0)    scale(1);    filter: blur(0); }
        }
        @keyframes overlayIn {
            from { opacity: 0; backdrop-filter: blur(0px); }
            to   { opacity: 1; backdrop-filter: blur(8px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 8px rgba(0, 217, 255, 0.3); }
            50%       { box-shadow: 0 0 20px rgba(0, 217, 255, 0.7), 0 0 40px rgba(0, 255, 163, 0.3); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); filter: blur(4px); }
            to   { opacity: 1; transform: translateY(0);   filter: blur(0); }
        }

        /* ===================== LAYOUT ===================== */
        .app-wrapper {
            position: relative;
            z-index: 2;
            display: flex;
            height: 100vh;
        }

        /* SIDEBAR */
        .sidebar {
            width: 300px;
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(var(--blur-strength));
            border-right: 1px solid var(--glass-border);
            padding: 24px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            position: relative;
            z-index: 100;
            animation: fadeInLeft 0.6s ease both;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            opacity: 0.5;
        }

        .logo-section {
            padding: 0 24px 32px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            margin-bottom: 24px;
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .logo-sub {
            font-size: 11px;
            color: var(--text-muted);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-top: 4px;
        }

        .nav-section { padding: 0 16px; flex: 1; }
        .nav-label {
            font-size: 10px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--text-muted);
            padding: 0 8px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-speed) cubic-bezier(0.34, 1.56, 0.64, 1);
            margin-bottom: 4px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(0,217,255,0.1), rgba(0,255,163,0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 12px;
        }

        .nav-item:hover::before,
        .nav-item.active::before { opacity: 1; }

        .nav-item.active {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .nav-item:hover { transform: translateX(4px); }

        .nav-icon {
            width: 38px; height: 38px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
            background: rgba(255,255,255,0.05);
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .nav-item.active .nav-icon,
        .nav-item:hover .nav-icon {
            background: rgba(0, 217, 255, 0.15);
            color: var(--primary);
        }

        .nav-text { font-size: 14px; font-weight: 500; }
        .nav-badge {
            margin-left: auto;
            background: var(--accent);
            color: white;
            font-size: 10px;
            padding: 2px 7px;
            border-radius: 20px;
            font-weight: 700;
        }

        /* MAIN */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-bar {
            padding: 20px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--glass-border);
            background: rgba(10, 14, 39, 0.4);
            backdrop-filter: blur(var(--blur-strength));
            position: sticky;
            top: 0;
            z-index: 50;
            animation: fadeInDown 0.5s ease both;
        }

        .page-title { font-size: 22px; font-weight: 700; }
        .top-actions { display: flex; gap: 12px; align-items: center; }

        .icon-btn {
            width: 40px; height: 40px;
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            background: var(--glass);
            color: var(--text);
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .icon-btn:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: var(--primary);
            color: var(--primary);
            transform: scale(1.1);
            filter: drop-shadow(0 0 6px rgba(0,217,255,0.5));
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
            scroll-behavior: smooth;
        }

        .page { display: none; animation: pageEnter 0.45s ease both; }
        .page.active { display: block; }

        /* ===================== EXCHANGE PAGE ===================== */
        .exchange-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 28px;
            transition: all 0.4s ease;
            animation: scaleIn 0.5s ease both;
        }

        .card:hover {
            border-color: rgba(0, 217, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 217, 255, 0.1);
            transform: translateY(-2px);
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exchange-row {
            display: flex;
            gap: 12px;
            align-items: flex-end;
            margin-bottom: 20px;
        }

        .exchange-card {
            flex: 1;
            background: rgba(255,255,255,0.04);
            border: 1px solid var(--glass-border);
            border-radius: 14px;
            padding: 16px;
            transition: border-color 0.3s ease;
        }

        .exchange-card:focus-within { border-color: rgba(0, 217, 255, 0.5); }

        .exchange-card-title {
            font-size: 11px;
            color: var(--text-muted);
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .exchange-card select,
        .exchange-card input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 15px;
            outline: none;
            cursor: pointer;
        }

        .exchange-card input { font-size: 18px; font-weight: 600; }
        .exchange-card input::placeholder { color: var(--text-muted); font-weight: 400; }
        .exchange-card select option { background: var(--surface); }

        /* ===================== SWAP BUTTON FIX ===================== */
        .swap-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            padding-bottom: 4px;
        }

        .swap-btn {
            width: 46px; height: 46px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(0,217,255,0.15), rgba(0,255,163,0.1));
            border: 2px solid rgba(0, 217, 255, 0.35);
            color: var(--primary);
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .swap-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle, rgba(0,217,255,0.3), transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 50%;
        }

        .swap-btn:hover {
            background: rgba(0, 217, 255, 0.25);
            border-color: var(--primary);
            transform: scale(1.12);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.4);
        }

        .swap-btn:hover::before { opacity: 1; }

        .swap-btn.spinning .bi { animation: swapSpin 0.55s cubic-bezier(0.34, 1.56, 0.64, 1) both; }

        .rate-display {
            background: rgba(0, 217, 255, 0.05);
            border: 1px solid rgba(0, 217, 255, 0.15);
            border-radius: 10px;
            padding: 12px 16px;
            font-size: 13px;
            text-align: center;
            margin-bottom: 20px;
        }

        .rate-display strong { color: var(--primary); font-weight: 600; }

        .convert-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border: none;
            border-radius: 12px;
            color: var(--darker);
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            letter-spacing: 0.5px;
        }

        .convert-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 24px rgba(0, 217, 255, 0.4);
            filter: brightness(1.1);
        }

        .convert-btn:active { transform: scale(0.97); filter: blur(1px); transition: all 0.1s; }

        /* History */
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(0, 217, 255, 0.05);
            border-color: rgba(0, 217, 255, 0.2);
            transform: translateX(4px);
        }

        .history-left p:first-child { font-weight: 600; font-size: 14px; }
        .history-left p:last-child  { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
        .history-right { text-align: right; }
        .history-right p:first-child { color: var(--success); font-weight: 600; }
        .history-right p:last-child  { font-size: 12px; color: var(--success); }

        /* ===================== MARKET PAGE ===================== */
        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .market-card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            padding: 24px;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            animation: fadeInUp 0.5s ease both;
        }

        .market-card:hover {
            transform: translateY(-6px) scale(1.01);
            border-color: rgba(0, 217, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0, 217, 255, 0.15);
        }

        .market-pair { font-size: 16px; font-weight: 700; margin-bottom: 4px; }
        .market-sub  { font-size: 12px; color: var(--text-muted); margin-bottom: 16px; }
        .market-rate { font-size: 26px; font-weight: 800; color: var(--primary); margin-bottom: 8px; }

        .market-change {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 700;
        }

        .market-change.up   { background: rgba(0, 217, 163, 0.15); color: var(--success); }
        .market-change.down { background: rgba(255, 51, 102, 0.15); color: var(--danger); }

        /* ===================== CHAT PAGE ===================== */
        .chat-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 24px;
            height: calc(100vh - 160px);
        }

        .chat-list {
            background: rgba(26,31,58,0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow-y: auto;
            padding: 16px;
        }

        .chat-item {
            display: flex; align-items: center; gap: 12px;
            padding: 12px; border-radius: 12px; cursor: pointer;
            transition: all 0.3s ease; margin-bottom: 8px;
        }

        .chat-item:hover, .chat-item.active {
            background: rgba(0, 217, 255, 0.1);
        }

        .chat-avatar {
            width: 44px; height: 44px; border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 16px; color: var(--darker);
            flex-shrink: 0;
        }

        .chat-name { font-size: 14px; font-weight: 600; }
        .chat-preview { font-size: 12px; color: var(--text-muted); }

        .chat-main {
            background: rgba(26,31,58,0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            display: flex; flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--glass-border);
            display: flex; align-items: center; gap: 12px;
            background: rgba(255,255,255,0.02);
        }

        .chat-messages {
            flex: 1; overflow-y: auto; padding: 24px;
            display: flex; flex-direction: column; gap: 16px;
            scroll-behavior: smooth;
        }

        .message { display: flex; }
        .message.own { justify-content: flex-end; }

        .message-bubble {
            max-width: 70%; padding: 12px 16px; border-radius: 16px;
            font-size: 14px; line-height: 1.5;
        }

        .message-bubble.other {
            background: rgba(255,255,255,0.07);
            border: 1px solid var(--glass-border);
            border-radius: 16px 16px 16px 4px;
            animation: fadeInLeft 0.3s ease both;
        }

        .message-bubble.own {
            background: linear-gradient(135deg, var(--primary-dark), #005f8a);
            border-radius: 16px 16px 4px 16px;
            animation: slideInRight 0.3s ease both;
        }

        .chat-input-area {
            padding: 20px 24px;
            border-top: 1px solid var(--glass-border);
            display: flex; gap: 12px; align-items: center;
            background: rgba(255,255,255,0.02);
        }

        .chat-input {
            flex: 1; background: rgba(255,255,255,0.06);
            border: 1px solid var(--glass-border);
            border-radius: 12px; padding: 12px 16px;
            color: var(--text); font-size: 14px; outline: none;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus { border-color: rgba(0, 217, 255, 0.5); }
        .chat-input::placeholder { color: var(--text-muted); }

        /* ===================== PROFILE PAGE ===================== */
        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 24px;
        }

        .profile-card {
            background: rgba(26,31,58,0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 32px;
            text-align: center;
            animation: scaleIn 0.5s ease both;
        }

        .profile-avatar {
            width: 90px; height: 90px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex; align-items: center; justify-content: center;
            font-size: 36px; font-weight: 800; color: var(--darker);
            margin: 0 auto 20px;
            animation: pulse-glow 2.5s infinite;
        }

        .profile-name  { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
        .profile-email { font-size: 13px; color: var(--text-muted); margin-bottom: 24px; }

        .profile-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

        .stat-item {
            background: rgba(255,255,255,0.04);
            border-radius: 12px;
            padding: 14px;
            transition: all 0.3s ease;
        }

        .stat-item:hover { background: rgba(0,217,255,0.08); transform: scale(1.03); }
        .stat-value { font-size: 20px; font-weight: 800; color: var(--primary); }
        .stat-label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

        .profile-details {
            background: rgba(26,31,58,0.6);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 28px;
            animation: slideInRight 0.5s ease both;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .detail-item:last-child { border-bottom: none; }
        .detail-label { color: var(--text-muted); font-size: 14px; }
        .detail-value { font-weight: 600; font-size: 14px; }

        /* ===================== NOTIFICATION ===================== */
        .notification {
            position: fixed;
            top: 28px; right: 28px;
            z-index: 9999;
            background: rgba(10, 14, 39, 0.92);
            backdrop-filter: blur(24px) saturate(1.5);
            border: 1px solid rgba(0,217,255,0.35);
            border-radius: 16px;
            padding: 16px 22px;
            max-width: 360px;
            min-width: 260px;
            box-shadow: 0 8px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(0,217,255,0.1);
            animation: notifSlide 3.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            pointer-events: none;
        }

        .notification-inner {
            display: flex; align-items: flex-start; gap: 12px;
        }

        .notification-icon {
            font-size: 22px; flex-shrink: 0;
            filter: drop-shadow(0 0 6px rgba(0,217,255,0.6));
        }

        .notification-body { flex: 1; }

        .notification-title {
            font-size: 13px; font-weight: 700;
            color: var(--primary); margin-bottom: 3px;
            letter-spacing: 0.3px;
        }

        .notification-msg {
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.4;
        }

        .notification-progress {
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
            margin-top: 10px;
            animation: notifProgress 3.5s linear forwards;
        }

        @keyframes notifProgress {
            from { width: 100%; opacity: 1; }
            to   { width: 0%;   opacity: 0.4; }
        }

        .notification.success { border-color: rgba(0, 217, 163, 0.4); }
        .notification.success .notification-title { color: var(--success); }
        .notification.success .notification-progress { background: linear-gradient(90deg, var(--success), var(--secondary)); }

        .notification.error { border-color: rgba(255, 51, 102, 0.4); }
        .notification.error .notification-title { color: var(--danger); }
        .notification.error .notification-progress { background: linear-gradient(90deg, var(--danger), var(--warning)); }

        .notification.warning { border-color: rgba(255, 165, 0, 0.4); }
        .notification.warning .notification-title { color: var(--warning); }
        .notification.warning .notification-progress { background: linear-gradient(90deg, var(--warning), #ffd700); }

        /* ===================== SETTINGS PANEL ===================== */
        .settings-overlay {
            position: fixed; inset: 0; z-index: 500;
            background: rgba(5, 8, 18, 0.65);
            backdrop-filter: blur(8px);
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .settings-overlay.open {
            opacity: 1; pointer-events: all;
            animation: overlayIn 0.4s ease both;
        }

        .settings-panel {
            position: fixed;
            top: 0; right: 0;
            width: 420px; height: 100vh;
            background: rgba(12, 16, 38, 0.96);
            backdrop-filter: blur(30px) saturate(1.8);
            border-left: 1px solid var(--glass-border);
            z-index: 501;
            transform: translateX(100%);
            transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex; flex-direction: column;
            overflow: hidden;
        }

        .settings-panel.open {
            transform: translateX(0);
            animation: settingsOpen 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) both;
        }

        .settings-header {
            padding: 28px 28px 20px;
            border-bottom: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(0,217,255,0.04);
        }

        .settings-header h2 { font-size: 20px; font-weight: 700; }
        .settings-header h2 span { color: var(--primary); }

        .settings-close {
            width: 36px; height: 36px; border-radius: 10px;
            border: 1px solid var(--glass-border); background: var(--glass);
            color: var(--text); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-close:hover {
            background: rgba(255,51,102,0.15); border-color: var(--danger);
            color: var(--danger); transform: rotate(90deg) scale(1.1);
        }

        .settings-body { flex: 1; overflow-y: auto; padding: 24px 28px; }

        .settings-section {
            margin-bottom: 32px;
            animation: fadeInUp 0.4s ease both;
        }

        .settings-section-title {
            font-size: 11px; letter-spacing: 2px;
            text-transform: uppercase; color: var(--text-muted);
            margin-bottom: 16px; padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .settings-item {
            display: flex; align-items: center; justify-content: space-between;
            padding: 14px 16px; border-radius: 14px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.06);
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .settings-item:hover {
            background: rgba(0,217,255,0.05);
            border-color: rgba(0,217,255,0.2);
        }

        .settings-item-left { display: flex; align-items: center; gap: 14px; }

        .settings-item-icon {
            width: 40px; height: 40px; border-radius: 10px;
            background: rgba(0,217,255,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; color: var(--primary);
        }

        .settings-item-info { }
        .settings-item-name  { font-size: 14px; font-weight: 600; }
        .settings-item-desc  { font-size: 12px; color: var(--text-muted); margin-top: 2px; }

        /* Toggle Switch */
        .toggle {
            position: relative; width: 48px; height: 26px;
            flex-shrink: 0;
        }

        .toggle input { opacity: 0; width: 0; height: 0; }

        .toggle-slider {
            position: absolute; inset: 0;
            background: rgba(255,255,255,0.1);
            border-radius: 13px; cursor: pointer;
            border: 1px solid rgba(255,255,255,0.15);
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            width: 20px; height: 20px;
            left: 2px; top: 2px;
            background: var(--text-muted);
            border-radius: 50%;
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .toggle input:checked + .toggle-slider {
            background: rgba(0,217,255,0.25);
            border-color: rgba(0,217,255,0.5);
            box-shadow: 0 0 12px rgba(0,217,255,0.3);
        }

        .toggle input:checked + .toggle-slider::before {
            transform: translateX(22px);
            background: var(--primary);
            box-shadow: 0 0 8px rgba(0,217,255,0.6);
        }

        /* Select in settings */
        .settings-select {
            background: rgba(255,255,255,0.06);
            border: 1px solid var(--glass-border);
            border-radius: 8px; padding: 6px 10px;
            color: var(--text); font-size: 13px;
            cursor: pointer; outline: none;
            transition: border-color 0.3s ease;
        }

        .settings-select:focus { border-color: rgba(0,217,255,0.5); }
        .settings-select option { background: var(--surface); }

        /* Color dots */
        .theme-dots { display: flex; gap: 8px; }

        .theme-dot {
            width: 24px; height: 24px; border-radius: 50%;
            cursor: pointer; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }

        .theme-dot:hover, .theme-dot.active {
            transform: scale(1.3);
            border-color: white;
        }

        .settings-footer {
            padding: 20px 28px;
            border-top: 1px solid var(--glass-border);
            background: rgba(0,217,255,0.02);
        }

        .settings-save-btn {
            width: 100%; padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none; border-radius: 12px;
            color: var(--darker); font-size: 15px; font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,217,255,0.4);
            filter: brightness(1.08);
        }

        /* ===================== RESPONSIVE ===================== */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed; left: -300px;
                top: 0; height: 100vh;
                transition: left 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            }

            .sidebar.active { left: 0; }
            .exchange-grid, .profile-grid { grid-template-columns: 1fr; }
            .chat-layout { grid-template-columns: 1fr; }
            .settings-panel { width: 100%; }
            .content-area { padding: 20px 16px; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0,217,255,0.2); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0,217,255,0.4); }
    </style>
</head>
<body>

<!-- ===================== SETTINGS OVERLAY + PANEL ===================== -->
<div class="settings-overlay" id="settingsOverlay" onclick="closeSettings()"></div>
<div class="settings-panel" id="settingsPanel">
    <div class="settings-header">
        <h2>‚öôÔ∏è C√†i <span>ƒê·∫∑t</span></h2>
        <button class="settings-close" onclick="closeSettings()"><i class="bi bi-x-lg"></i></button>
    </div>

    <div class="settings-body">

        <!-- Giao di·ªán -->
        <div class="settings-section" style="animation-delay:0.05s">
            <div class="settings-section-title">üé® Giao Di·ªán</div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-moon-stars"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Ch·∫ø ƒë·ªô t·ªëi</div>
                        <div class="settings-item-desc">B·∫≠t/t·∫Øt dark mode</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="darkMode" checked onchange="applySetting('darkMode')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-wind"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Motion Blur</div>
                        <div class="settings-item-desc">Hi·ªáu ·ª©ng m·ªù khi chuy·ªÉn trang</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="motionBlur" checked onchange="applySetting('motionBlur')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-lightning"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Ho·∫°t ·∫£nh m∆∞·ª£t</div>
                        <div class="settings-item-desc">Smooth transition to√†n c·ª•c</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="smoothAnim" checked onchange="applySetting('smoothAnim')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-palette"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">M√†u ch·ªß ƒë·∫°o</div>
                        <div class="settings-item-desc">Ch·ªçn m√†u accent</div>
                    </div>
                </div>
                <div class="theme-dots">
                    <div class="theme-dot active" style="background:#00d9ff"  onclick="setAccentColor('#00d9ff','#00ffa3',this)"></div>
                    <div class="theme-dot" style="background:#a855f7"  onclick="setAccentColor('#a855f7','#ec4899',this)"></div>
                    <div class="theme-dot" style="background:#f97316"  onclick="setAccentColor('#f97316','#fbbf24',this)"></div>
                    <div class="theme-dot" style="background:#22c55e"  onclick="setAccentColor('#22c55e','#86efac',this)"></div>
                </div>
            </div>
        </div>

        <!-- Th√¥ng b√°o -->
        <div class="settings-section" style="animation-delay:0.1s">
            <div class="settings-section-title">üîî Th√¥ng B√°o</div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-bell"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Th√¥ng b√°o giao d·ªãch</div>
                        <div class="settings-item-desc">Khi chuy·ªÉn ƒë·ªïi ti·ªÅn th√†nh c√¥ng</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="notifTx" checked onchange="applySetting('notifTx')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-graph-up-arrow"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">C·∫£nh b√°o t·ª∑ gi√°</div>
                        <div class="settings-item-desc">Khi t·ª∑ gi√° bi·∫øn ƒë·ªông m·∫°nh</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="notifRate" checked onchange="applySetting('notifRate')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-chat-dots"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Th√¥ng b√°o chat</div>
                        <div class="settings-item-desc">Tin nh·∫Øn t·ª´ h·ªó tr·ª£ vi√™n</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="notifChat" onchange="applySetting('notifChat')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-volume-up"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">√Çm thanh th√¥ng b√°o</div>
                        <div class="settings-item-desc">Ph√°t √¢m khi c√≥ alert</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="notifSound" onchange="applySetting('notifSound')">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- T·ª∑ gi√° -->
        <div class="settings-section" style="animation-delay:0.15s">
            <div class="settings-section-title">üí± T·ª∑ Gi√°</div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-arrow-repeat"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">T·ª± ƒë·ªông c·∫≠p nh·∫≠t</div>
                        <div class="settings-item-desc">L√†m m·ªõi t·ª∑ gi√° t·ª± ƒë·ªông</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="autoRefresh" checked onchange="applySetting('autoRefresh')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-clock"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Chu k·ª≥ c·∫≠p nh·∫≠t</div>
                        <div class="settings-item-desc">T·∫ßn su·∫•t l√†m m·ªõi d·ªØ li·ªáu</div>
                    </div>
                </div>
                <select class="settings-select" id="refreshRate">
                    <option value="30">30 gi√¢y</option>
                    <option value="60" selected>1 ph√∫t</option>
                    <option value="300">5 ph√∫t</option>
                    <option value="600">10 ph√∫t</option>
                </select>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-currency-exchange"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Ti·ªÅn m·∫∑c ƒë·ªãnh</div>
                        <div class="settings-item-desc">Lo·∫°i ti·ªÅn hi·ªÉn th·ªã ƒë·∫ßu ti√™n</div>
                    </div>
                </div>
                <select class="settings-select" id="defaultCurrency">
                    <option value="USD">USD</option>
                    <option value="VND" selected>VND</option>
                    <option value="EUR">EUR</option>
                </select>
            </div>
        </div>

        <!-- B·∫£o m·∫≠t -->
        <div class="settings-section" style="animation-delay:0.2s">
            <div class="settings-section-title">üîí B·∫£o M·∫≠t</div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-fingerprint"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">X√°c th·ª±c sinh tr·∫Øc h·ªçc</div>
                        <div class="settings-item-desc">Face ID / V√¢n tay</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="biometric" onchange="applySetting('biometric')">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-shield-lock"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Kh√≥a ·ª©ng d·ª•ng</div>
                        <div class="settings-item-desc">Y√™u c·∫ßu m√£ PIN khi m·ªü</div>
                    </div>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="appLock" onchange="applySetting('appLock')">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- Phi√™n b·∫£n -->
        <div class="settings-section" style="animation-delay:0.25s">
            <div class="settings-section-title">‚ÑπÔ∏è Th√¥ng Tin</div>
            <div class="settings-item">
                <div class="settings-item-left">
                    <div class="settings-item-icon"><i class="bi bi-info-circle"></i></div>
                    <div class="settings-item-info">
                        <div class="settings-item-name">Phi√™n b·∫£n</div>
                        <div class="settings-item-desc">FluxTea v2.1.0</div>
                    </div>
                </div>
                <span style="color:var(--text-muted);font-size:12px;">Latest ‚úì</span>
            </div>
        </div>

    </div>

    <div class="settings-footer">
        <button class="settings-save-btn" onclick="saveSettings()">
            <i class="bi bi-check2-circle"></i> L∆∞u C√†i ƒê·∫∑t
        </button>
    </div>
</div>

<div class="app-wrapper">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <div class="logo-section">
            <div class="logo">FluxTea</div>
            <div class="logo-sub">Premium Exchange</div>
        </div>

        <nav class="nav-section">
            <div class="nav-label">Menu Ch√≠nh</div>
            <div class="nav-item active" onclick="switchPage('exchange', this)">
                <div class="nav-icon"><i class="bi bi-currency-exchange"></i></div>
                <span class="nav-text">ƒê·ªïi Ti·ªÅn</span>
            </div>
            <div class="nav-item" onclick="switchPage('market', this)">
                <div class="nav-icon"><i class="bi bi-graph-up"></i></div>
                <span class="nav-text">Th·ªã Tr∆∞·ªùng</span>
            </div>
            <div class="nav-item" onclick="switchPage('chat', this)">
                <div class="nav-icon"><i class="bi bi-chat-dots"></i></div>
                <span class="nav-text">H·ªó Tr·ª£</span>
                <span class="nav-badge">2</span>
            </div>
            <div class="nav-item" onclick="switchPage('profile', this)">
                <div class="nav-icon"><i class="bi bi-person"></i></div>
                <span class="nav-text">H·ªì S∆°</span>
            </div>
        </nav>
    </aside>

    <!-- MAIN -->
    <div class="main-content">
        <!-- TOP BAR -->
        <header class="top-bar">
            <div style="display:flex;align-items:center;gap:16px">
                <button class="icon-btn" onclick="toggleSidebar()" id="menuBtn">
                    <i class="bi bi-list"></i>
                </button>
                <h1 class="page-title" id="pageTitle">ƒê·ªïi Ti·ªÅn</h1>
            </div>
            <div class="top-actions">
                <button class="icon-btn" onclick="refreshRates()" title="L√†m m·ªõi t·ª∑ gi√°">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>
                <button class="icon-btn" onclick="openSettings()" title="C√†i ƒë·∫∑t">
                    <i class="bi bi-gear"></i>
                </button>
                <button class="icon-btn" onclick="showNotification('info','üì£ Th√¥ng B√°o H·ªá Th·ªëng','T·ª∑ gi√° USD/VND v·ª´a ƒë∆∞·ª£c c·∫≠p nh·∫≠t!')" title="Th√¥ng b√°o">
                    <i class="bi bi-bell"></i>
                </button>
            </div>
        </header>

        <div class="content-area">
            <!-- EXCHANGE PAGE -->
            <div class="page active" id="exchange">
                <div class="exchange-grid">
                    <!-- Converter -->
                    <div class="card" style="animation-delay:0.1s">
                        <div class="card-title">
                            <i class="bi bi-currency-exchange" style="color:var(--primary)"></i>
                            Chuy·ªÉn ƒê·ªïi Ti·ªÅn T·ªá
                            <span style="font-size:11px;color:var(--text-muted);font-weight:400;margin-left:auto">T·ª∑ gi√° th·ª±c t·∫ø</span>
                        </div>

                        <!-- FROM -->
                        <div class="exchange-row">
                            <div class="exchange-card">
                                <div class="exchange-card-title">Ti·ªÅn G·ª≠i</div>
                                <select id="fromCurrency" onchange="updateRate()">
                                    <option value="USD">üá∫üá∏ USD - ƒê√¥ La M·ªπ</option>
                                    <option value="VND">üáªüá≥ VND - ƒê·ªìng Vi·ªát Nam</option>
                                    <option value="EUR">üá™üá∫ EUR - Euro</option>
                                    <option value="BRL">üáßüá∑ BRL - Real Brazil</option>
                                    <option value="USDT">üíé USDT - Tether</option>
                                </select>
                            </div>
                            <div class="exchange-card" style="flex:1.4">
                                <div class="exchange-card-title">S·ªë L∆∞·ª£ng</div>
                                <input type="number" id="fromAmount" placeholder="0.00" oninput="updateRate()" min="0">
                            </div>
                        </div>

                        <!-- SWAP BUTTON (FIXED) -->
                        <div class="swap-container">
                            <button class="swap-btn" id="swapBtn" onclick="swapCurrencies()" title="Ho√°n ƒë·ªïi ti·ªÅn t·ªá">
                                <i class="bi bi-arrow-left-right"></i>
                            </button>
                        </div>

                        <!-- TO -->
                        <div class="exchange-row" style="margin-top:12px">
                            <div class="exchange-card">
                                <div class="exchange-card-title">Ti·ªÅn Nh·∫≠n</div>
                                <select id="toCurrency" onchange="updateRate()">
                                    <option value="USD">üá∫üá∏ USD - ƒê√¥ La M·ªπ</option>
                                    <option value="VND" selected>üáªüá≥ VND - ƒê·ªìng Vi·ªát Nam</option>
                                    <option value="EUR">üá™üá∫ EUR - Euro</option>
                                    <option value="BRL">üáßüá∑ BRL - Real Brazil</option>
                                    <option value="USDT">üíé USDT - Tether</option>
                                </select>
                            </div>
                            <div class="exchange-card" style="flex:1.4">
                                <div class="exchange-card-title">S·ªë L∆∞·ª£ng</div>
                                <input type="number" id="toAmount" placeholder="0.00" readonly style="cursor:default;opacity:0.8">
                            </div>
                        </div>

                        <!-- Rate display -->
                        <div class="rate-display">
                            <span id="rateText">Nh·∫≠p s·ªë ti·ªÅn ƒë·ªÉ xem t·ª∑ gi√°...</span><br>
                            <small id="rateTime" style="color:var(--text-muted);font-size:11px"></small>
                        </div>

                        <button class="convert-btn" onclick="convertCurrency()">
                            <i class="bi bi-check2-circle"></i> X√°c Nh·∫≠n Chuy·ªÉn ƒê·ªïi
                        </button>
                    </div>

                    <!-- History -->
                    <div class="card" style="animation-delay:0.2s">
                        <div class="card-title">
                            <i class="bi bi-clock-history" style="color:var(--secondary)"></i>
                            L·ªãch S·ª≠ Giao D·ªãch
                        </div>
                        <div id="historyList">
                            <div class="history-item">
                                <div class="history-left">
                                    <p>100 USD ‚Üí VND</p>
                                    <p>2026-02-19 14:30</p>
                                </div>
                                <div class="history-right">
                                    <p>2,613,962 VND</p>
                                    <p>‚úì Th√†nh c√¥ng</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MARKET PAGE -->
            <div class="page" id="market">
                <div style="margin-bottom:24px">
                    <h2 style="font-size:20px;font-weight:700;margin-bottom:4px">üìà Th·ªã Tr∆∞·ªùng Ti·ªÅn T·ªá</h2>
                    <p style="color:var(--text-muted);font-size:14px">T·ª∑ gi√° th·ª±c t·∫ø c·∫≠p nh·∫≠t 24/7</p>
                </div>
                <div class="market-grid">
                    <div class="market-card" style="animation-delay:0.05s">
                        <div class="market-pair">USD/VND</div>
                        <div class="market-sub">1 USD = ? VND</div>
                        <div class="market-rate">26,139.62</div>
                        <span class="market-change up"><i class="bi bi-arrow-up-short"></i> +0.08%</span>
                    </div>
                    <div class="market-card" style="animation-delay:0.1s">
                        <div class="market-pair">EUR/VND</div>
                        <div class="market-sub">1 EUR = ? VND</div>
                        <div class="market-rate">28,412.50</div>
                        <span class="market-change up"><i class="bi bi-arrow-up-short"></i> +0.15%</span>
                    </div>
                    <div class="market-card" style="animation-delay:0.15s">
                        <div class="market-pair">BRL/VND</div>
                        <div class="market-sub">1 BRL = ? VND</div>
                        <div class="market-rate">5,082.35</div>
                        <span class="market-change down"><i class="bi bi-arrow-down-short"></i> -0.23%</span>
                    </div>
                    <div class="market-card" style="animation-delay:0.2s">
                        <div class="market-pair">USDT/VND</div>
                        <div class="market-sub">1 USDT = ? VND</div>
                        <div class="market-rate">26,139.62</div>
                        <span class="market-change up"><i class="bi bi-arrow-up-short"></i> +0.12%</span>
                    </div>
                    <div class="market-card" style="animation-delay:0.25s">
                        <div class="market-pair">USD/EUR</div>
                        <div class="market-sub">1 USD = ? EUR</div>
                        <div class="market-rate">0.92</div>
                        <span class="market-change up"><i class="bi bi-arrow-up-short"></i> +0.06%</span>
                    </div>
                    <div class="market-card" style="animation-delay:0.3s">
                        <div class="market-pair">USD/BRL</div>
                        <div class="market-sub">1 USD = ? BRL</div>
                        <div class="market-rate">5.14</div>
                        <span class="market-change down"><i class="bi bi-arrow-down-short"></i> -0.18%</span>
                    </div>
                </div>
            </div>

            <!-- CHAT PAGE -->
            <div class="page" id="chat">
                <div class="chat-layout">
                    <div class="chat-list">
                        <div style="font-size:13px;color:var(--text-muted);margin-bottom:12px;padding:4px 8px">K√™nh h·ªó tr·ª£</div>
                        <div class="chat-item active" onclick="selectChat(this)">
                            <div class="chat-avatar">S</div>
                            <div>
                                <div class="chat-name">Support Team</div>
                                <div class="chat-preview">Ch√∫ng t√¥i s·∫Ω gi√∫p b·∫°n...</div>
                            </div>
                        </div>
                        <div class="chat-item" onclick="selectChat(this)">
                            <div class="chat-avatar" style="background:linear-gradient(135deg,var(--accent),var(--warning))">H</div>
                            <div>
                                <div class="chat-name">H·ªó Tr·ª£ Thanh To√°n</div>
                                <div class="chat-preview">B·∫°n c·∫ßn gi√∫p g√¨?</div>
                            </div>
                        </div>
                        <div class="chat-item" onclick="selectChat(this)">
                            <div class="chat-avatar" style="background:linear-gradient(135deg,var(--secondary),#00aaff)">C</div>
                            <div>
                                <div class="chat-name">C·ªông ƒê·ªìng</div>
                                <div class="chat-preview">Tham gia trao ƒë·ªïi...</div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-main">
                        <div class="chat-header">
                            <div class="chat-avatar" style="width:38px;height:38px;font-size:14px">S</div>
                            <div>
                                <div style="font-weight:700">Support Team</div>
                                <div style="font-size:12px;color:var(--success)">‚óè Tr·ª±c tuy·∫øn</div>
                            </div>
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <div class="message">
                                <div class="message-bubble other">üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω c·ªßa FluxTea. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?</div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <input class="chat-input" id="chatInput" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeydown="if(event.key==='Enter') sendMessage()">
                            <button class="icon-btn" onclick="sendMessage()" style="background:linear-gradient(135deg,var(--primary),var(--secondary));border:none;color:var(--darker)">
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROFILE PAGE -->
            <div class="page" id="profile">
                <div class="profile-grid">
                    <div class="profile-card">
                        <div class="profile-avatar">A</div>
                        <div class="profile-name">Nguy·ªÖn Minh A</div>
                        <div class="profile-email">nguyenminh@example.com</div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <div class="stat-value">1,243</div>
                                <div class="stat-label">Giao D·ªãch</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">$50K+</div>
                                <div class="stat-label">T·ªïng Chuy·ªÉn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">2 nƒÉm</div>
                                <div class="stat-label">Th√†nh Vi√™n</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">Gold ‚≠ê</div>
                                <div class="stat-label">X·∫øp H·∫°ng</div>
                            </div>
                        </div>
                    </div>

                    <div class="profile-details">
                        <div class="card-title"><i class="bi bi-person-badge" style="color:var(--primary)"></i> Th√¥ng Tin T√†i Kho·∫£n</div>
                        <div class="detail-item">
                            <span class="detail-label">H·ªç v√† t√™n</span>
                            <span class="detail-value">Nguy·ªÖn Minh A</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Email</span>
                            <span class="detail-value">nguyenminh@example.com</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">S·ªë ƒëi·ªán tho·∫°i</span>
                            <span class="detail-value">+84 9xx xxx xxx</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Qu·ªëc gia</span>
                            <span class="detail-value">üáªüá≥ Vi·ªát Nam</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Tr·∫°ng th√°i KYC</span>
                            <span class="detail-value" style="color:var(--success)">‚úì ƒê√£ x√°c minh</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ng√†y tham gia</span>
                            <span class="detail-value">15/02/2024</span>
                        </div>
                    </div>
                </div>
            </div>

        </div><!-- end content-area -->
    </div><!-- end main-content -->
</div><!-- end app-wrapper -->

<script>
    /* ===================== RATES ===================== */
    const rates = {
        'USD':  { 'VND': 26139.62, 'EUR': 0.92,    'BRL': 5.14,    'USDT': 1 },
        'EUR':  { 'VND': 28412.50, 'USD': 1.09,    'BRL': 5.59,    'USDT': 1.09 },
        'BRL':  { 'VND': 5082.35,  'USD': 0.1945,  'EUR': 0.179,   'USDT': 0.1945 },
        'USDT': { 'VND': 26139.62, 'USD': 1,       'EUR': 0.92,    'BRL': 5.14 },
        'VND':  { 'USD': 0.0000383,'EUR': 0.0000352,'BRL': 0.000197,'USDT': 0.0000383 }
    };

    /* ===================== NAVIGATION ===================== */
    function switchPage(page, el) {
        document.querySelectorAll('.page').forEach(p => {
            p.classList.remove('active');
        });
        const pageEl = document.getElementById(page);
        pageEl.classList.add('active');
        // Reset animation
        pageEl.style.animation = 'none';
        pageEl.offsetHeight; // reflow
        pageEl.style.animation = '';

        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        const navItem = el ? el.closest('.nav-item') : document.querySelector(`.nav-item[onclick*="${page}"]`);
        if (navItem) navItem.classList.add('active');

        const titles = { exchange:'ƒê·ªïi Ti·ªÅn', market:'Th·ªã Tr∆∞·ªùng', chat:'H·ªó Tr·ª£', profile:'H·ªì S∆°' };
        document.getElementById('pageTitle').textContent = titles[page];

        if (window.innerWidth <= 768) {
            document.getElementById('sidebar').classList.remove('active');
        }
    }

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('active');
    }

    /* ===================== EXCHANGE ===================== */
    function updateRate() {
        const from = document.getElementById('fromCurrency').value;
        const to   = document.getElementById('toCurrency').value;
        const amount = parseFloat(document.getElementById('fromAmount').value) || 0;

        if (from === to) {
            document.getElementById('toAmount').value = amount.toFixed(2);
            document.getElementById('rateText').innerHTML = `<strong>1 ${from} = 1.00 ${to}</strong>`;
            document.getElementById('rateTime').textContent = 'C·∫≠p nh·∫≠t: ' + new Date().toLocaleTimeString('vi-VN');
            return;
        }

        const rate = rates[from]?.[to] ?? null;
        if (!rate) {
            document.getElementById('rateText').textContent = 'Kh√¥ng h·ªó tr·ª£ c·∫∑p ti·ªÅn n√†y';
            document.getElementById('toAmount').value = '';
            return;
        }
        const result = amount * rate;
        document.getElementById('toAmount').value = result.toFixed(2);
        document.getElementById('rateText').innerHTML = `<strong>1 ${from} = ${rate.toLocaleString('vi-VN', { maximumFractionDigits: 6 })} ${to}</strong>`;
        document.getElementById('rateTime').textContent = 'C·∫≠p nh·∫≠t: ' + new Date().toLocaleTimeString('vi-VN');
    }

    /* ===================== SWAP FIX ===================== */
    function swapCurrencies() {
        const fromSel = document.getElementById('fromCurrency');
        const toSel   = document.getElementById('toCurrency');

        // Swap values
        const tmp = fromSel.value;
        fromSel.value = toSel.value;
        toSel.value   = tmp;

        // Spin animation
        const btn = document.getElementById('swapBtn');
        btn.classList.add('spinning');
        btn.addEventListener('animationend', () => btn.classList.remove('spinning'), { once: true });

        updateRate();
        showNotification('info', 'üîÑ Ho√°n ƒê·ªïi', `${toSel.value} ‚áå ${fromSel.value} ƒë√£ ƒë∆∞·ª£c ho√°n ƒë·ªïi`);
    }

    /* ===================== CONVERT ===================== */
    function convertCurrency() {
        const from       = document.getElementById('fromCurrency').value;
        const to         = document.getElementById('toCurrency').value;
        const fromAmount = document.getElementById('fromAmount').value;
        const toAmount   = document.getElementById('toAmount').value;

        if (!fromAmount || parseFloat(fromAmount) <= 0) {
            showNotification('warning', '‚ö†Ô∏è C·∫£nh B√°o', 'Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn h·ª£p l·ªá!');
            return;
        }

        showNotification('success', '‚úÖ Th√†nh C√¥ng', `${parseFloat(fromAmount).toLocaleString('vi-VN')} ${from} = ${parseFloat(toAmount).toLocaleString('vi-VN')} ${to}`);

        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        historyItem.style.animation = 'fadeIn 0.4s ease both';
        historyItem.innerHTML = `
            <div class="history-left">
                <p>${parseFloat(fromAmount).toLocaleString('vi-VN')} ${from} ‚Üí ${to}</p>
                <p>${new Date().toLocaleString('vi-VN')}</p>
            </div>
            <div class="history-right">
                <p>${parseFloat(toAmount).toLocaleString('vi-VN')} ${to}</p>
                <p>‚úì Th√†nh c√¥ng</p>
            </div>
        `;
        const historyList = document.getElementById('historyList');
        historyList.insertBefore(historyItem, historyList.firstChild);
    }

    function refreshRates() {
        const btn = document.querySelector('.icon-btn .bi-arrow-clockwise');
        if (btn) {
            btn.style.transition = 'transform 0.6s ease';
            btn.style.transform  = 'rotate(360deg)';
            setTimeout(() => { btn.style.transform = 'rotate(0deg)'; btn.style.transition = ''; }, 650);
        }
        updateRate();
        showNotification('info', 'üîÑ L√†m M·ªõi', 'T·ª∑ gi√° ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t!');
    }

    /* ===================== CHAT ===================== */
    function selectChat(element) {
        document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
        element.classList.add('active');
    }

    function sendMessage() {
        const input   = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;

        const chatMessages = document.getElementById('chatMessages');
        const msgDiv = document.createElement('div');
        msgDiv.className = 'message own';
        msgDiv.innerHTML = `<div class="message-bubble own">${message}</div>`;
        chatMessages.appendChild(msgDiv);
        input.value = '';
        chatMessages.scrollTop = chatMessages.scrollHeight;

        setTimeout(() => {
            const replyDiv = document.createElement('div');
            replyDiv.className = 'message';
            replyDiv.innerHTML = `<div class="message-bubble other">üòä C·∫£m ∆°n b·∫°n! Ch√∫ng t√¥i s·∫Ω tr·∫£ l·ªùi trong gi√¢y l√°t...</div>`;
            chatMessages.appendChild(replyDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 700);
    }

    /* ===================== NOTIFICATION (UPGRADED) ===================== */
    let notifStack = 0;

    function showNotification(type = 'info', title = '', message = '') {
        // type: 'success' | 'error' | 'warning' | 'info'
        const icons = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };

        const notif = document.createElement('div');
        notif.className = `notification ${type}`;
        notif.style.top = (28 + notifStack * 100) + 'px';
        notif.innerHTML = `
            <div class="notification-inner">
                <div class="notification-icon">${icons[type] || '‚ÑπÔ∏è'}</div>
                <div class="notification-body">
                    <div class="notification-title">${title}</div>
                    <div class="notification-msg">${message}</div>
                </div>
            </div>
            <div class="notification-progress"></div>
        `;
        document.body.appendChild(notif);
        notifStack++;

        setTimeout(() => {
            notif.remove();
            notifStack = Math.max(0, notifStack - 1);
        }, 3900);
    }

    /* ===================== SETTINGS ===================== */
    function openSettings() {
        document.getElementById('settingsOverlay').classList.add('open');
        document.getElementById('settingsPanel').classList.add('open');
    }

    function closeSettings() {
        document.getElementById('settingsPanel').classList.remove('open');
        document.getElementById('settingsOverlay').classList.remove('open');
    }

    function applySetting(id) {
        const checked = document.getElementById(id).checked;
        const labels  = {
            darkMode:    ['Ch·∫ø ƒë·ªô t·ªëi ƒë√£ b·∫≠t', 'Ch·∫ø ƒë·ªô t·ªëi ƒë√£ t·∫Øt'],
            motionBlur:  ['Motion blur ƒë√£ b·∫≠t', 'Motion blur ƒë√£ t·∫Øt'],
            smoothAnim:  ['Ho·∫°t ·∫£nh m∆∞·ª£t ƒë√£ b·∫≠t', 'Ho·∫°t ·∫£nh m∆∞·ª£t ƒë√£ t·∫Øt'],
            notifTx:     ['Th√¥ng b√°o giao d·ªãch b·∫≠t', 'Th√¥ng b√°o giao d·ªãch t·∫Øt'],
            notifRate:   ['C·∫£nh b√°o t·ª∑ gi√° b·∫≠t', 'C·∫£nh b√°o t·ª∑ gi√° t·∫Øt'],
            notifChat:   ['Th√¥ng b√°o chat b·∫≠t', 'Th√¥ng b√°o chat t·∫Øt'],
            notifSound:  ['√Çm thanh th√¥ng b√°o b·∫≠t', '√Çm thanh th√¥ng b√°o t·∫Øt'],
            autoRefresh: ['T·ª± ƒë·ªông c·∫≠p nh·∫≠t b·∫≠t', 'T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·∫Øt'],
            biometric:   ['X√°c th·ª±c sinh tr·∫Øc ƒë√£ b·∫≠t', 'X√°c th·ª±c sinh tr·∫Øc ƒë√£ t·∫Øt'],
            appLock:     ['Kh√≥a ·ª©ng d·ª•ng ƒë√£ b·∫≠t', 'Kh√≥a ·ª©ng d·ª•ng ƒë√£ t·∫Øt'],
        };

        if (id === 'motionBlur') {
            document.documentElement.style.setProperty('--blur-strength', checked ? '20px' : '0px');
        }
        if (id === 'smoothAnim') {
            document.documentElement.style.setProperty('--transition-speed', checked ? '0.4s' : '0.05s');
        }

        const msg = labels[id] ? labels[id][checked ? 0 : 1] : 'C√†i ƒë·∫∑t ƒë√£ thay ƒë·ªïi';
        showNotification(checked ? 'success' : 'info', '‚öôÔ∏è C√†i ƒê·∫∑t', msg);
    }

    function setAccentColor(primary, secondary, dotEl) {
        document.documentElement.style.setProperty('--primary', primary);
        document.documentElement.style.setProperty('--secondary', secondary);
        document.querySelectorAll('.theme-dot').forEach(d => d.classList.remove('active'));
        dotEl.classList.add('active');
        showNotification('success', 'üé® Giao Di·ªán', 'M√†u ch·ªß ƒë·∫°o ƒë√£ ƒë∆∞·ª£c thay ƒë·ªïi!');
    }

    function saveSettings() {
        const settings = {
            darkMode:    document.getElementById('darkMode').checked,
            motionBlur:  document.getElementById('motionBlur').checked,
            smoothAnim:  document.getElementById('smoothAnim').checked,
            notifTx:     document.getElementById('notifTx').checked,
            notifRate:   document.getElementById('notifRate').checked,
            notifChat:   document.getElementById('notifChat').checked,
            notifSound:  document.getElementById('notifSound').checked,
            autoRefresh: document.getElementById('autoRefresh').checked,
            biometric:   document.getElementById('biometric').checked,
            appLock:     document.getElementById('appLock').checked,
            refreshRate: document.getElementById('refreshRate').value,
            defaultCurrency: document.getElementById('defaultCurrency').value,
        };
        localStorage.setItem('fluxtea_settings', JSON.stringify(settings));
        showNotification('success', '‚úÖ ƒê√£ L∆∞u', 'C√†i ƒë·∫∑t ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!');
        setTimeout(closeSettings, 800);
    }

    function loadSettings() {
        const saved = localStorage.getItem('fluxtea_settings');
        if (!saved) return;
        try {
            const s = JSON.parse(saved);
            Object.keys(s).forEach(key => {
                const el = document.getElementById(key);
                if (el && el.type === 'checkbox') el.checked = s[key];
                else if (el) el.value = s[key];
            });
            if (s.motionBlur === false) document.documentElement.style.setProperty('--blur-strength', '0px');
            if (s.smoothAnim === false) document.documentElement.style.setProperty('--transition-speed', '0.05s');
        } catch(e) {}
    }

    /* ===================== INIT ===================== */
    document.addEventListener('DOMContentLoaded', () => {
        loadSettings();
        updateRate();
        setTimeout(() => showNotification('info', 'üëã Ch√†o M·ª´ng', 'FluxTea v2.1.0 s·∫µn s√†ng ph·ª•c v·ª•!'), 800);
    });
</script>
</body>
</html>
